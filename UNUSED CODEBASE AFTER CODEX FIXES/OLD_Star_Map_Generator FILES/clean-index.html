<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Star Map Generator</title>
    <link rel="stylesheet" href="css/general.css">
    <link rel="stylesheet" href="css/map.css">
    <link rel="stylesheet" href="css/text-layers.css">
    <link rel="stylesheet" href="css/image-options.css">
    <link rel="stylesheet" href="css/generate-button.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/starmap-canvas.css">
    <link rel="stylesheet" href="css/inline-styles.css">
    <link rel="stylesheet" href="css/adjustments.css">
    <link rel="stylesheet" href="css/settings-button.css">
    <link rel="stylesheet" href="css/zip-code-history.css">
    <link rel="stylesheet" href="css/text-entry-history.css">
    <link rel="stylesheet" href="css/coordinate-fields.css">
    <link rel="stylesheet" href="css/image-format-fix.css">
    <link rel="stylesheet" href="css/fixes.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Abril+Fatface&family=Anton&family=Bebas+Neue&family=Black+Ops+One&family=Caveat&family=Dancing+Script&family=Great+Vibes&family=Indie+Flower&family=Libre+Baskerville&family=Lilita+One&family=Lora&family=Merriweather&family=Montserrat&family=Noto+Serif&family=Nunito&family=Open+Sans&family=Oswald&family=Pacifico&family=Permanent+Marker&family=Pinyon+Script&family=Playfair+Display&family=Quicksand&family=Raleway&family=Roboto&family=Roboto+Slab&family=Satisfy&family=Shadows+Into+Light&family=Tangerine&display=swap" rel="stylesheet">
    <style>
        /* Additional styles to ensure the canvas is visible */
        #star-map-canvas {
            border: 1px solid #ddd;
            margin: 20px auto;
            display: block;
            max-width: 100%;
            background-color: #000;
        }
        
        /* Loading indicator styles */
        #loading-indicator {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid #3498db;
            border-radius: 50%;
            animation: spin 2s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Make sure the generate button is enabled */
        #generateBtn {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 20px 0;
        }
        
        #generateBtn:hover {
            background-color: #45a049;
        }
        
        #downloadBtn {
            background-color: #2196F3;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 20px 0;
        }
        
        #downloadBtn:hover {
            background-color: #0b7dda;
        }

        /* Fixed Text Styling section */
        .fixed-text-styling {
            padding: 10px 0;
        }

        /* DPI section */
        .dpi-options {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 10px 0;
        }

        /* Output Dimensions section */
        .dimensions-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin: 10px 0;
        }

        .dimension-input {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* Star Map Style section */
        .star-map-style-container {
            display: flex;
            justify-content: center;
            margin: 10px 0;
        }

        #star-map-style {
            padding: 5px;
            width: 200px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Create Your Star Map</h1>
        
        <form id="customizationForm" onsubmit="event.preventDefault();">
            <!-- Side by side Design/Event/Occasion and Input Date -->
            <div class="top-row centered-row">
                <div class="form-group">
                    <label for="occasion">Design/Event/Occasion:</label>
                    <select id="occasion" name="occasion">
                        <option value="">Select an option</option>
                        <option value="custom">Add Your Own...</option>
                        <option value="mothers_day">Mother's Day</option>
                        <option value="fathers_day">Father's Day</option>
                        <option value="birthday">Birthday</option>
                        <option value="day_we_met">Day We Met</option>
                        <option value="our_anniversary">Our Wedding Day</option>
                        <option value="engagement_day">Day We Were Engaged</option>
                        <option value="sweet_16_birthday">Sweet 16 Birthday</option>
                        <option value="21st_birthday">21st Birthday</option>
                        <option value="graduation_day">Graduation Day</option>
                        <option value="retirement">Finally Retired</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="date">Input Date:</label>
                    <input type="date" id="date" onkeydown="if(event.key === 'Enter') { event.preventDefault(); }">
                </div>
            </div>

            <div class="input-section" style="margin-top: 30px !important;">
                <label id="map-location-label" class="map-location-label">Map Location:</label>
                <div class="manual-coordinates">
                    <label for="latitude">Latitude:</label>
                    <input type="text" id="latitude" placeholder="Enter Latitude" onkeydown="if(event.key === 'Enter') { event.preventDefault(); }">
                    <label for="longitude">Longitude:</label>
                    <input type="text" id="longitude" placeholder="Enter Longitude" onkeydown="if(event.key === 'Enter') { event.preventDefault(); }">
                </div>
            </div>

            <div class="grouped-sections-container">
                <div class="input-section">
                    <label class="center-align">Customizable Text Layers (Max 50 Chars):</label>
                </div>
                <div id="text-layer-container" style="padding-top: 10px; padding-bottom: 10px;">
                    <div class="text-entry-wrapper">
                        <label for="text-entry-1">#1:</label>
                        <input type="text" class="text-entry" id="text-entry-1" placeholder="Main Title (e.g., CHARLINE)" maxlength="50" list="text-entry-1-history">
                        <div class="font-controls">
                            <select id="font-family-1" class="font-family-select">
                                <option value="Arial">Arial</option>
                                <option value="Helvetica">Helvetica</option>
                                <option value="Times New Roman">Times New Roman</option>
                                <option value="Courier New">Courier New</option>
                                <option value="Verdana">Verdana</option>
                                <option value="Georgia">Georgia</option>
                                <option value="Palatino">Palatino</option>
                                <option value="Garamond">Garamond</option>
                                <option value="Bookman">Bookman</option>
                                <option value="Comic Sans MS">Comic Sans MS</option>
                                <option value="Trebuchet MS">Trebuchet MS</option>
                                <option value="Arial Black">Arial Black</option>
                                <option value="Impact">Impact</option>
                            </select>
                            <select id="font-size-1" class="font-size-select">
                                <option value="12">12px</option>
                                <option value="14">14px</option>
                                <option value="16">16px</option>
                                <option value="18">18px</option>
                                <option value="20">20px</option>
                                <option value="24">24px</option>
                                <option value="36">36px</option>
                                <option value="42">42px</option>
                                <option value="48" selected>48px</option>
                                <option value="60">60px</option>
                                <option value="72">72px</option>
                            </select>
                            <span class="char-count" id="char-count-1">50</span>
                            <div class="style-options">
                                <label class="bold-label"><input type="checkbox" id="text-bold-1"> Bold</label>
                                <label class="italic-label"><input type="checkbox" id="text-italic-1"> Italic</label>
                            </div>
                            <input type="color" id="font-color-1" class="font-color-picker" value="#FFFFFF">
                        </div>
                    </div>
                    
                    <div class="text-entry-wrapper">
                        <label for="text-entry-2">#2:</label>
                        <input type="text" class="text-entry" id="text-entry-2" placeholder="Subtitle (e.g., The night sky the day you were born)" maxlength="50" list="text-entry-2-history">
                        <div class="font-controls">
                            <select id="font-family-2" class="font-family-select">
                                <option value="Arial">Arial</option>
                                <option value="Helvetica">Helvetica</option>
                                <option value="Times New Roman">Times New Roman</option>
                                <option value="Courier New">Courier New</option>
                                <option value="Verdana">Verdana</option>
                                <option value="Georgia">Georgia</option>
                                <option value="Palatino">Palatino</option>
                                <option value="Garamond">Garamond</option>
                                <option value="Bookman">Bookman</option>
                                <option value="Comic Sans MS">Comic Sans MS</option>
                                <option value="Trebuchet MS">Trebuchet MS</option>
                                <option value="Arial Black">Arial Black</option>
                                <option value="Impact">Impact</option>
                            </select>
                            <select id="font-size-2" class="font-size-select">
                                <option value="12">12px</option>
                                <option value="14">14px</option>
                                <option value="16" selected>16px</option>
                                <option value="18">18px</option>
                                <option value="20">20px</option>
                                <option value="24">24px</option>
                                <option value="36">36px</option>
                                <option value="42">42px</option>
                                <option value="48">48px</option>
                                <option value="60">60px</option>
                                <option value="72">72px</option>
                            </select>
                            <span class="char-count" id="char-count-2">50</span>
                            <div class="style-options">
                                <label class="bold-label"><input type="checkbox" id="text-bold-2"> Bold</label>
                                <label class="italic-label"><input type="checkbox" id="text-italic-2"> Italic</label>
                            </div>
                            <input type="color" id="font-color-2" class="font-color-picker" value="#FFFFFF">
                        </div>
                    </div>
                    
                    <div class="text-entry-wrapper">
                        <label for="text-entry-3">#3:</label>
                        <input type="text" class="text-entry" id="text-entry-3" placeholder="Additional text (50 chars max)" maxlength="50" list="text-entry-3-history">
                        <div class="font-controls">
                            <select id="font-family-3" class="font-family-select">
                                <option value="Arial">Arial</option>
                                <option value="Helvetica">Helvetica</option>
                                <option value="Times New Roman">Times New Roman</option>
                                <option value="Courier New">Courier New</option>
                                <option value="Verdana">Verdana</option>
                                <option value="Georgia">Georgia</option>
                                <option value="Palatino">Palatino</option>
                                <option value="Garamond">Garamond</option>
                                <option value="Bookman">Bookman</option>
                                <option value="Comic Sans MS">Comic Sans MS</option>
                                <option value="Trebuchet MS">Trebuchet MS</option>
                                <option value="Arial Black">Arial Black</option>
                                <option value="Impact">Impact</option>
                            </select>
                            <select id="font-size-3" class="font-size-select">
                                <option value="12">12px</option>
                                <option value="14" selected>14px</option>
                                <option value="16">16px</option>
                                <option value="18">18px</option>
                                <option value="20">20px</option>
                                <option value="24">24px</option>
                                <option value="36">36px</option>
                                <option value="42">42px</option>
                                <option value="48">48px</option>
                                <option value="60">60px</option>
                                <option value="72">72px</option>
                            </select>
                            <span class="char-count" id="char-count-3">50</span>
                            <div class="style-options">
                                <label class="bold-label"><input type="checkbox" id="text-bold-3"> Bold</label>
                                <label class="italic-label"><input type="checkbox" id="text-italic-3"> Italic</label>
                            </div>
                            <input type="color" id="font-color-3" class="font-color-picker" value="#FFFFFF">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Output Dimensions section -->
            <div class="grouped-sections-container">
                <div class="input-section">
                    <label class="center-align">Output Dimensions:</label>
                    <div class="dimensions-container">
                        <div class="dimension-input">
                            <label for="output-width">Width:</label>
                            <input type="number" id="output-width" min="100" max="5000" value="800"> px
                        </div>
                        <div class="dimension-input">
                            <label for="output-height">Height:</label>
                            <input type="number" id="output-height" min="100" max="5000" value="1000"> px
                        </div>
                    </div>
                </div>

                <div class="input-section background-colors-section">
                    <label class="center-align">Background Colors:</label>
                    <div class="background-colors-container">
                        <div class="color-picker-row">
                            <div class="color-picker-group">
                                <label>Star Map Image:</label>
                                <input type="color" id="star-field-color" class="color-input" value="#000000">
                            </div>
                            <div class="color-picker-group">
                                <label>Star Map Canvas:</label>
                                <input type="color" id="outside-color" class="color-input" value="#0a0e1a">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="grouped-sections-container">
                <div class="input-section">
                    <label class="center-align">Image Format:</label>
                </div>
                <div class="image-options">
                    <table>
                        <tr>
                            <td>
                                <input type="radio" name="imageType" id="image-type-png" value="png" checked>
                                <label for="image-type-png">PNG</label>
                            </td>
                            <td>
                                <input type="checkbox" id="export-transparency"> 
                                <label for="export-transparency">Transparency</label>
                            </td>
                            <td>
                                <input type="radio" name="imageType" id="image-type-jpg" value="jpg">
                                <label for="image-type-jpg">JPG</label>
                            </td>
                            <td>
                                <input type="radio" name="imageType" id="image-type-svg" value="svg">
                                <label for="image-type-svg">SVG</label>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>

            <div class="button-container">
                <button type="button" id="generateBtn">PREVIEW MY STAR MAP</button>
            </div>
            
            <div class="download-section">
                <button type="button" id="downloadBtn">DOWNLOAD MY STAR MAP</button>
            </div>
            
            <canvas id="star-map-canvas" width="800" height="800"></canvas>
            
            <!-- Datalists for input history -->
            <datalist id="text-entry-1-history"></datalist>
            <datalist id="text-entry-2-history"></datalist>
            <datalist id="text-entry-3-history"></datalist>
        </form>
    </div>

    <!-- Loading indicator -->
    <div id="loading-indicator" style="display: none;">
        <div class="spinner"></div>
        <div style="color: white; margin-top: 20px; font-weight: bold;">Generating Star Map...</div>
    </div>

    <!-- Include JavaScript files -->
    <script src="js/minimal-fix.js"></script>
</body>
</html>
