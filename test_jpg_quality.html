<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JPG Quality Selector Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 40px;
            max-width: 800px;
            margin: 0 auto;
        }
        .test-section {
            margin: 30px 0;
            padding: 20px;
            border: 2px solid #ddd;
            border-radius: 8px;
        }
        .settings-row {
            margin-top: 15px;
            border-top: 1px solid #ddd;
            padding-top: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
        }
        label[for="png-transparency"].disabled-option {
            opacity: 0.5;
            cursor: not-allowed;
        }
        label[for="png-transparency"].disabled-option input[type="checkbox"] {
            cursor: not-allowed;
        }
        #status-log {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
            max-height: 300px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>JPG Quality Selector Test</h1>
    
    <div class="test-section">
        <h2>Image Type Controls</h2>
        <div class="settings-row">
            <span style="font-weight: 600;">Image Type:</span>
            <input type="radio" name="image-format" value="png" id="png-format" checked> 
            <label for="png-format" style="margin-right: 5px;">PNG</label>
            
            <input type="checkbox" id="png-transparency"> 
            <label for="png-transparency" style="margin-right: 20px;">Transparency</label>
            
            <input type="radio" name="image-format" value="jpg" id="jpg-format"> 
            <label for="jpg-format" style="margin-right: 5px;">JPG</label>
            
            <select id="jpg-quality" style="width: 70px; height: 28px; padding: 2px 5px; margin-right: 15px; display: none;">
                <option value="0.60">60%</option>
                <option value="0.70">70%</option>
                <option value="0.80">80%</option>
                <option value="0.90" selected>90%</option>
                <option value="1.00">100%</option>
            </select>
            
            <input type="radio" name="image-format" value="svg" id="svg-format"> 
            <label for="svg-format" style="margin-right: 20px;">SVG</label>
            
            <input type="radio" name="image-format" value="pdf" id="pdf-format"> 
            <label for="pdf-format">PDF</label>
        </div>
    </div>
    
    <div id="status-log"></div>
    
    <script>
        const statusLog = document.getElementById('status-log');
        
        function log(message) {
            const time = new Date().toLocaleTimeString();
            statusLog.innerHTML += `[${time}] ${message}<br>`;
            statusLog.scrollTop = statusLog.scrollHeight;
        }
        
        // Image format controls
        const pngFormatRadio = document.getElementById('png-format');
        const jpgFormatRadio = document.getElementById('jpg-format');
        const svgFormatRadio = document.getElementById('svg-format');
        const pdfFormatRadio = document.getElementById('pdf-format');
        const jpgQualityDropdown = document.getElementById('jpg-quality');
        const transparencyCheckbox = document.getElementById('png-transparency');
        
        function updateFormatControls() {
            if (jpgFormatRadio.checked) {
                // Show JPG quality dropdown
                jpgQualityDropdown.style.display = 'inline-block';
                log('âœ… JPG selected - Quality dropdown VISIBLE');
                
                // Disable transparency (only PNG supports it)
                if (transparencyCheckbox) {
                    transparencyCheckbox.disabled = true;
                    transparencyCheckbox.checked = false;
                    const label = document.querySelector('label[for="png-transparency"]');
                    if (label) label.classList.add('disabled-option');
                    log('   Transparency checkbox DISABLED');
                }
            } else {
                // Hide JPG quality dropdown
                jpgQualityDropdown.style.display = 'none';
                log(`âœ… ${pngFormatRadio.checked ? 'PNG' : svgFormatRadio.checked ? 'SVG' : 'PDF'} selected - Quality dropdown HIDDEN`);
                
                // Enable transparency for PNG
                if (pngFormatRadio.checked && transparencyCheckbox) {
                    transparencyCheckbox.disabled = false;
                    const label = document.querySelector('label[for="png-transparency"]');
                    if (label) label.classList.remove('disabled-option');
                    log('   Transparency checkbox ENABLED');
                }
            }
            
            // Log current quality if JPG is selected
            if (jpgFormatRadio.checked) {
                const quality = parseFloat(jpgQualityDropdown.value);
                log(`   Current quality: ${(quality * 100)}%`);
            }
        }
        
        // Add event listeners
        if (pngFormatRadio) pngFormatRadio.addEventListener('change', updateFormatControls);
        if (jpgFormatRadio) jpgFormatRadio.addEventListener('change', updateFormatControls);
        if (svgFormatRadio) svgFormatRadio.addEventListener('change', updateFormatControls);
        if (pdfFormatRadio) pdfFormatRadio.addEventListener('change', updateFormatControls);
        
        // Log quality changes
        jpgQualityDropdown.addEventListener('change', function() {
            const quality = parseFloat(this.value);
            log(`ðŸ”§ Quality changed to: ${(quality * 100)}%`);
        });
        
        // Initialize on page load
        log('ðŸš€ Page loaded - Initializing controls...');
        updateFormatControls();
    </script>
</body>
</html>
